<div sf-array="form" class="schema-form-array {{form.htmlClass}}"
     ng-model="$$value$$" ng-model-options="form.ngModelOptions">
  <label class="" ng-show="showTitle()">{{ form.title }}</label>
  <ol class="" ng-model="modelArray" ui-sortable>
    <li class="{{form.fieldHtmlClass}}"
        ng-repeat="item in modelArray track by $index" style="clear: right">
      <button ng-hide="form.readonly || form.remove === null"
              ng-click="deleteFromArray($index)"
              style="position: relative; z-index: 20; float: right"
              type="button" class="button small">
              <span aria-hidden="true">&times;</span><span class="sr-only" style="display: none">Close</span>
      </button>
      <sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator>
    </li>
  </ol>
  <div class="clearfix" style="padding: 15px;">
    <button ng-hide="form.readonly || form.add === null"
            ng-click="appendToArray()"
            type="button"
            class="button {{ form.style.add }} small">
      <i class="fa fa-lg plus"></i>
      {{ form.add || 'Add'}}
    </button>
  </div>
  <p ng-if="form.description"><small>
    <span class="help-block" ng-bind-html="form.description"></span>
  </small></p>
  <div class=""
       ng-class="{'error': hasError()}"
       ng-show="(hasError() && errorMessage(schemaError())) || form.description"
       ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div>

  <div ng-if="controls">
    <fb-replace-with-field target="#{{ field.form.type == 'boolean' ? 'boolean-field-' + ngModel.$name : ngModel.$name }}" controls="controls" enabled="true" field-elid="{{ field.elid }}" model="model" attr="ngModel.$name" name="{{ ngModel.$name }}" lookup-fields="field.lookupFields"></fb-replace-with-field>
  </div>
  <fb-validation-error error="field.errorModel[field.errorAttr]"></fb-validation-error>
</div>
